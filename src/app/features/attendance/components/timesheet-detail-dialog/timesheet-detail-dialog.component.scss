.timesheet-detail-dialog {

  display: flex;

  flex-direction: column;

  min-height: 70vh;

  background: #f8f9fa;

  color: #1f2937;



  .dialog-header {

    display: flex;

    justify-content: space-between;

    align-items: flex-start;

    padding: 18px 22px;

    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

    color: #fff;

    min-height: 84px;

  }



  .header-left {

    display: flex;

    align-items: flex-start;

    gap: 12px;

  }



  .header-icon {

    font-size: 2.2rem;

    color: #fff;

    align-self: flex-start;

    margin-top: 2px;

  }



  .header-text {

    display: flex;

    flex-direction: column;

    justify-content: center;

  }



  .header-title {

    color: #fff;

    font-size: 1.7rem;

    font-weight: 700;

    margin: 0 0 2px 0;

    letter-spacing: 0.01em;

  }



  .subtitle {

    color: #e0e7ef;

    font-size: 1.05rem;

    font-weight: 400;

    margin: 0;

    letter-spacing: 0.01em;

  }



  .header-ribbon {

    display: flex;

    gap: 32px;

    align-items: center;

    padding: 14px 32px 14px 32px;

    background: #fff;

    border-bottom: 1px solid #e2e8f0;

    color: #0f172a;

    font-size: 13px;

    min-height: 48px;

    position: relative;

    .stat-label {

      font-weight: 700;

      font-size: 10px;

      text-transform: uppercase;

      color: #64748b;

      margin-right: 4px;

      letter-spacing: 0.04em;

    }

    .stat-value {

      font-weight: 800;

      font-size: 15px;

      color: #2563eb;

      margin-right: 18px;

      letter-spacing: 0.01em;

    }

  }



  .search-row {

    display: flex;

    align-items: center;

    gap: 8px;

    background: #f8fafc;

    border-radius: 8px;

    box-shadow: 0 1px 3px rgba(0,0,0,0.04);

    padding: 4px 10px 4px 14px;

    margin: 0 32px 8px 32px;

    position: absolute;

    left: 0;

    right: 0;

    top: 100%;

    z-index: 10;

    min-width: 220px;

    max-width: 480px;

    transition: all 0.3s cubic-bezier(.4,0,.2,1);

    .search-field {

      flex: 1 1 auto;

      margin: 0;

      min-width: 0;

    }

  }



  .content-area {

    display: flex;

    flex: 1 1 auto;

    min-height: 0;

    height: calc(95vh - 160px);



    .master-sidebar, .sidebar {

      width: 30%;

      background: #f1f5f9;

      border-right: 1px solid #e2e8f0;

      overflow: auto;

      padding: 18px 0 18px 0;

      box-shadow: 2px 0 8px 0 rgba(31,41,55,0.03);



      .mat-nav-list, .mat-mdc-nav-list { padding: 0; margin: 0; }

      .mat-list-item, .mat-mdc-list-item {

        padding: 12px 18px;

        cursor: pointer;

        display: flex;

        align-items: center;

        gap: 14px;

        border-radius: 8px;

        margin-bottom: 6px;

        min-height: 56px;

        transition: background .18s, color .18s, box-shadow .18s;

      }

      .mat-list-item:hover, .mat-mdc-list-item:hover {

        background: #e0e7ef;

        box-shadow: 0 2px 8px rgba(59,130,246,0.06);

      }

      .mat-list-item.selected, .mat-mdc-list-item.selected,

      .mat-list-item.mat-mdc-selected, .mat-mdc-list-item.mat-mdc-selected {

        background: #fff;

        position: relative;

        border-left: 3px solid #3b82f6;

        box-shadow: 0 2px 8px rgba(59,130,246,0.10);

        z-index: 2;

      }

      .avatar[matListAvatar] {

        width: 40px;

        height: 40px;

        min-width: 40px;

        min-height: 40px;

        border-radius: 50%;

        background: #6366f1;

        color: #fff;

        display: flex;

        align-items: center;

        justify-content: center;

        font-weight: 800;

        font-size: 1.15rem;

        flex: 0 0 40px;

        box-shadow: 0 2px 8px rgba(99,102,241,0.10);

        letter-spacing: 0.01em;

        margin: 0 12px 0 0;

      }

      .meta { display:flex; flex-direction:column; min-width:0; }

      .name { font-weight:800; font-size:15px; color: #0f172a; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; letter-spacing:0.01em; }

      .sub { font-size:12px; color: #64748b; margin-top:2px; font-weight:500; letter-spacing:0.01em; }

    }



    .detail-panel {

      flex: 1 1 auto;

      padding: 16px;

      overflow: auto;



      .daily-cards {

        display: grid;

        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));

        gap: 22px;

        align-items: stretch;

        margin-bottom: 12px;

      }



      /* ─── Daily card base ─── */

      .daily-record-card, .daily-card {

        background: #fff;

        border: 1px solid #e2e8f0;

        border-radius: 16px;

        padding: 22px 18px 18px 18px;

        box-shadow: 0 1.5px 6px 0 rgba(0,0,0,0.10), 0 1.5px 4px -1px rgba(0,0,0,0.08);

        min-height: 160px;

        height: 100%;

        display: flex;

        flex-direction: column;

        justify-content: space-between;

        transition: transform .18s, box-shadow .18s, border-color .18s, background .18s;

        position: relative;

        overflow: hidden;

      }

      .daily-record-card:hover, .daily-card:hover {

        transform: translateY(-3px) scale(1.01);

        box-shadow: 0 8px 32px rgba(59,130,246,0.13), 0 2px 8px rgba(59,130,246,0.09);

      }

      .daily-record-card.weekend, .daily-card.weekend {

        opacity: 0.95;

        background: linear-gradient(180deg,#fff,#fbfbff);

      }



      /* ─── Draft / pending state — makes the card visually distinct ─── */

      /* Applies when a draft correction is saved but not yet submitted (purple) */

      .daily-record-card.is-requested, .daily-card.is-requested {

        border-color: #6366f1;

        background: linear-gradient(160deg, #f5f3ff 0%, #ede9fe 100%);

        box-shadow: 0 0 0 2px rgba(99,102,241,0.18), 0 4px 16px rgba(99,102,241,0.10);

      }

      .daily-record-card.is-requested:hover, .daily-card.is-requested:hover {

        box-shadow: 0 0 0 2.5px rgba(99,102,241,0.30), 0 8px 32px rgba(99,102,241,0.18);

      }

      /* Applies after Submit All Edits — request sent to manager, awaiting approval (orange) */

      .daily-record-card.is-pending, .daily-card.is-pending {

        border-color: #ea580c;

        background: linear-gradient(160deg, #fff7ed 0%, #ffedd5 100%);

        box-shadow: 0 0 0 2px rgba(234,88,12,0.18), 0 4px 16px rgba(234,88,12,0.10);

      }

      .daily-record-card.is-pending:hover, .daily-card.is-pending:hover {

        box-shadow: 0 0 0 2.5px rgba(234,88,12,0.30), 0 8px 32px rgba(234,88,12,0.18);

        transform: translateY(-2px) scale(1.005);

      }



      /* --- Finalized / payroll-locked card state --- */
      .daily-record-card.is-finalized, .daily-card.is-finalized {
        border-color: #0d9488;
        background: linear-gradient(160deg, #f0fdfa 0%, #ccfbf1 100%);
        box-shadow: 0 0 0 2px rgba(13,148,136,0.18), 0 4px 16px rgba(13,148,136,0.10);
      }
      .daily-record-card.is-finalized:hover, .daily-card.is-finalized:hover {
        box-shadow: 0 0 0 2.5px rgba(13,148,136,0.32), 0 8px 32px rgba(13,148,136,0.16);
        transform: translateY(-2px) scale(1.005);
      }

      /* --- Manager Override card state (amber) --- */
      .daily-record-card.is-manager-override, .daily-card.is-manager-override {
        border-color: #d97706;
        background: linear-gradient(160deg, #fffbeb 0%, #fef3c7 100%);
        box-shadow: 0 0 0 2px rgba(217,119,6,0.18), 0 4px 16px rgba(217,119,6,0.10);
      }
      .daily-record-card.is-manager-override:hover, .daily-card.is-manager-override:hover {
        box-shadow: 0 0 0 2.5px rgba(217,119,6,0.32), 0 8px 32px rgba(217,119,6,0.16);
        transform: translateY(-2px) scale(1.005);
      }

      /* --- Approved card state (green) --- */
      .daily-record-card.is-approved, .daily-card.is-approved {
        border-color: #16a34a;
        background: linear-gradient(160deg, #f0fdf4 0%, #dcfce7 100%);
        box-shadow: 0 0 0 2px rgba(22,163,74,0.15), 0 4px 16px rgba(22,163,74,0.08);
      }
      .daily-record-card.is-approved:hover, .daily-card.is-approved:hover {
        box-shadow: 0 0 0 2.5px rgba(22,163,74,0.28), 0 8px 32px rgba(22,163,74,0.14);
        transform: translateY(-2px) scale(1.005);
      }

      /* --- Finalized for Payroll badge --- */
      .finalized-badge {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        background: #ccfbf1;
        border: 1.5px solid #5eead4;
        border-radius: 999px;
        padding: 3px 10px 3px 6px;
        font-size: 11px;
        font-weight: 700;
        color: #0f766e;
        margin-bottom: 8px;
        letter-spacing: 0.02em;
        width: fit-content;
        .lock-icon {
          font-size: 13px;
          width: 13px;
          height: 13px;
          line-height: 13px;
        }
      }

      /* --- Manager Adjusted badge --- */
      .manager-override-badge {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        background: #fef3c7;
        border: 1.5px solid #fcd34d;
        border-radius: 999px;
        padding: 3px 10px 3px 6px;
        font-size: 11px;
        font-weight: 700;
        color: #92400e;
        margin-bottom: 8px;
        letter-spacing: 0.02em;
        width: fit-content;
        .override-icon {
          font-size: 13px;
          width: 13px;
          height: 13px;
          line-height: 13px;
        }
      }

      /* --- Request Approved badge --- */
      .approved-badge {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        background: #dcfce7;
        border: 1.5px solid #86efac;
        border-radius: 999px;
        padding: 3px 10px 3px 6px;
        font-size: 11px;
        font-weight: 700;
        color: #15803d;
        margin-bottom: 8px;
        letter-spacing: 0.02em;
        width: fit-content;
        .approved-icon {
          font-size: 13px;
          width: 13px;
          height: 13px;
          line-height: 13px;
        }
      }

      /* --- Lock icon in card-actions for finalized records --- */
      .finalized-action-lock {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: #ccfbf1;
        color: #0f766e;
        mat-icon {
          font-size: 17px;
          width: 17px;
          height: 17px;
          line-height: 17px;
        }
      }

            /* --- Manager accounts icon in card-actions for overridden records --- */
      .override-action-lock {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: #fef3c7;
        color: #92400e;
        mat-icon {
          font-size: 17px;
          width: 17px;
          height: 17px;
          line-height: 17px;
        }
      }

      /* ─── Request badge (Draft Edit / Awaiting Approval) ─── */

      .request-badge {

        display: inline-flex;

        align-items: center;

        gap: 5px;

        background: #ede9fe;

        border: 1.5px solid #a5b4fc;

        border-radius: 999px;

        padding: 3px 10px 3px 6px;

        font-size: 11px;

        font-weight: 700;

        color: #4f46e5;

        margin-bottom: 8px;

        letter-spacing: 0.02em;

        width: fit-content;

        .requested-icon {

          font-size: 14px;

          width: 14px;

          height: 14px;

          line-height: 14px;

        }

      }



      /* ─── Edited time values ─── */

      .edited-info {

        color: #4f46e5;

        font-weight: 700;

        display: inline-flex;

        align-items: center;

        gap: 3px;

        .requested-icon {

          font-size: 13px;

          width: 13px;

          height: 13px;

          line-height: 13px;

          vertical-align: middle;

        }

      }



      .daily-record-card .card-date, .daily-card .card-date {

        font-weight: 800;

        margin-bottom: 8px;

        color: #0f172a;

        font-size: 1.08rem;

        letter-spacing: 0.01em;

      }

      .daily-record-card .card-actions, .daily-card .card-actions {

        display: flex;

        gap: 8px;

        align-items: center;

        justify-content: flex-end;

        margin-top: auto;

        padding-top: 6px;

      }



      /* ─── Status badges ─── */

      .status-badge {

        display: inline-flex;

        align-items: center;

        gap: 8px;

        padding: 5px 14px;

        border-radius: 999px;

        font-weight: 700;

        font-size: 14px;

        color: #fff;

        box-shadow: 0 1px 3px rgba(0,0,0,0.08);

        letter-spacing: 0.01em;

      }

      .status-badge.present { background: #16a34a; color: #fff; }

      .status-badge.absent  { background: #ef4444; color: #fff; }

      .status-badge.weekend { background: #6b7280; color: #fff; }

      .status-badge.leave   { background: #f59e0b; color: #fff; }

      .status-badge.late {

        background: #fde047;

        color: #92400e;

        border: 1.5px solid #fbbf24;

        box-shadow: 0 1px 3px rgba(251,191,36,0.10);

      }

      .status-badge.half-day { background: #f97316; color: #fff; }
            .status-badge.norecord {

        background: #e5e7eb;

        color: #334155;

        border: 1.5px solid #cbd5e1;

        box-shadow: 0 1px 3px rgba(203,213,225,0.10);

      }

    }

  }



  .mini-stats-row {

    display: flex;

    gap: 28px;

    align-items: center;

    margin-bottom: 10px;

    font-size: 15px;

    font-weight: 600;

    color: #334155;

    letter-spacing: 0.01em;

  }

  .mini-stats-row .mini-label {

    color: #64748b;

    font-size: 11px;

    font-weight: 700;

    text-transform: uppercase;

    margin-right: 3px;

    letter-spacing: 0.04em;

  }

  .mini-stats-row .mini-value {

    color: #2563eb;

    font-size: 15px;

    font-weight: 800;

    margin-right: 10px;

    letter-spacing: 0.01em;

  }

  .dialog-footer {

    padding: 18px 28px 18px 28px;

    background: #fff;

    border-top: 1px solid #e2e8f0;

    display: flex;

    justify-content: space-between;

    gap: 12px;

    align-items: center;

    box-shadow: 0 -2px 8px rgba(31,41,55,0.04);

    min-height: 64px;

  }

  .dialog-footer .footer-left { display: flex; gap: 10px; }

  .dialog-footer .footer-right { display: flex; gap: 18px; }

}



:host ::ng-deep .mat-mdc-dialog-container,

:host ::ng-deep .mat-dialog-container {

  padding: 0 !important;

  border-radius: 12px !important;

  overflow: hidden !important;

}



:host ::ng-deep .mat-form-field, :host ::ng-deep .mat-mdc-form-field {

  width: 100%;

}



:host ::ng-deep .dialog-header button.mat-icon-button,

:host ::ng-deep .dialog-header button.mat-mdc-icon-button {

  color: rgba(255,255,255,0.95);

}



:host ::ng-deep .mat-mdc-list-item .mat-mdc-list-avatar,

:host ::ng-deep .mat-list-item .mat-list-avatar,

:host ::ng-deep [matListAvatar] {

  display: inline-flex !important;

  align-items: center;

  justify-content: center;

}



.sidebar-row {

  display: flex;

  align-items: center;

  gap: 12px;

  width: 100%;

  min-height: 48px;

}

.avatar-circle {

  width: 38px;

  height: 38px;

  min-width: 38px;

  min-height: 38px;

  border-radius: 50%;

  background: #6366f1;

  color: #fff;

  display: flex;

  align-items: center;

  justify-content: center;

  font-weight: 800;

  font-size: 1.1rem;

  box-shadow: 0 2px 8px rgba(99,102,241,0.10);

  letter-spacing: 0.01em;

}

.sidebar-meta {

  display: flex;

  flex-direction: column;

  min-width: 0;

  gap: 2px;

}

.name { font-weight:800; font-size:15px; color: #0f172a; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; letter-spacing:0.01em; }

.sub { font-size:12px; color: #64748b; font-weight:500; letter-spacing:0.01em; }



.ribbon-search {

  display: flex;

  align-items: center;

  margin-left: 32px;

}

.search-input-group {

  display: flex;

  align-items: center;

  background: #f1f5f9;

  border-radius: 8px;

  box-shadow: 0 1px 3px rgba(0,0,0,0.04);

  padding: 2px 10px 2px 8px;

  min-width: 220px;

  max-width: 320px;

  height: 36px;

  position: relative;

}

.ribbon-search-input {

  border: none;

  outline: none;

  background: transparent;

  font-size: 14px;

  color: #334155;

  padding: 0 8px;

  flex: 1 1 auto;

  min-width: 0;

}

.search-icon {

  color: #64748b;

  font-size: 20px;

  margin-right: 4px;

}

.clear-btn {

  background: none;

  border: none;

  outline: none;

  color: #64748b;

  font-size: 18px;

  cursor: pointer;

  margin-left: 2px;

  padding: 0;

  height: 32px;

  width: 32px;

  border-radius: 50%;

  display: flex;

  align-items: center;

  justify-content: center;

}

@media (max-width: 900px) {

  .ribbon-search {

    margin-left: 8px;

  }

  .search-input-group {

    min-width: 120px;

    max-width: 180px;

    height: 32px;

  }

  .ribbon-search-input {

    font-size: 13px;

  }

}