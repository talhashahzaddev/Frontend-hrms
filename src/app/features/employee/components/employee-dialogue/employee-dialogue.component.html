<div class="dialog-header">
  <h2 mat-dialog-title>
    <mat-icon>{{ isViewMode ? 'visibility' : 'edit' }}</mat-icon>
    {{ isViewMode ? 'View Employee' : 'Edit Employee' }}
  </h2>
  <button mat-icon-button mat-dialog-close class="close-button">
    <mat-icon>close</mat-icon>
  </button>
</div>

<mat-dialog-content class="dialog-content">
  <form [formGroup]="employeeForm" class="employee-form">

    <!-- Row 1: Basic Info -->
    <div class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>Employee Code</mat-label>
        <input matInput formControlName="employeeCode">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>First Name</mat-label>
        <input matInput formControlName="firstName" [disabled]="isViewMode">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Last Name</mat-label>
        <input matInput formControlName="lastName" [disabled]="isViewMode">
      </mat-form-field>
    </div>

    <!-- Row 2: Contact -->
    <div class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" [disabled]="isViewMode">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Phone</mat-label>
        <input matInput formControlName="phone" [disabled]="isViewMode">
      </mat-form-field>
    </div>

    <!-- Row 3: Department & Position -->
    <!-- <div class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>Department</mat-label>
        <ng-container *ngIf="!isViewMode; else viewDept">
          <mat-select formControlName="departmentId">
            <mat-option *ngFor="let dept of departments" [value]="dept.departmentId">
              {{ dept.departmentName }}
            </mat-option>
          </mat-select>
        </ng-container>
        <ng-template #viewDept>
          <input matInput [value]="employeeForm.get('departmentName')?.value" readonly>
        </ng-template>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Position</mat-label>
        <ng-container *ngIf="!isViewMode; else viewPos">
          <mat-select formControlName="positionId">
            <mat-option *ngFor="let pos of positions" [value]="pos.positionId">
              {{ pos.positionTitle }}
            </mat-option>
          </mat-select>
        </ng-container>
        <ng-template #viewPos>
          <input matInput [value]="employeeForm.get('positionTitle')?.value" readonly>
        </ng-template>
      </mat-form-field>
    </div> -->

    <!-- Row 4: Manager, Status & Employment Type -->
    <div class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>Reporting Manager</mat-label>
        <ng-container *ngIf="!isViewMode; else viewMgr">
          <mat-select formControlName="reportingManagerId">
            <mat-option *ngFor="let mgr of managers" [value]="mgr.employeeId">
              {{ mgr.fullName }}
            </mat-option>
          </mat-select>
        </ng-container>
        <ng-template #viewMgr>
          <input matInput [value]="employeeForm.get('reportingManagerName')?.value" readonly>
        </ng-template>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Status</mat-label>
        <ng-container *ngIf="!isViewMode; else viewStatus">
          <mat-select formControlName="status">
            <mat-option *ngFor="let s of statuses" [value]="s">{{ s }}</mat-option>
          </mat-select>
        </ng-container>
        <ng-template #viewStatus>
          <input matInput [value]="employeeForm.get('status')?.value" readonly>
        </ng-template>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Employment Type</mat-label>
        <ng-container *ngIf="!isViewMode; else viewEmployment">
          <mat-select formControlName="employmentType">
            <mat-option *ngFor="let type of employmentTypes" [value]="type">{{ type }}</mat-option>
          </mat-select>
        </ng-container>
        <ng-template #viewEmployment>
          <input matInput [value]="employeeForm.get('employmentType')?.value" readonly>
        </ng-template>
      </mat-form-field>
    </div>

    <!-- Row 5: Hire & Pay -->
    <div class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>Hire Date</mat-label>
        <input matInput type="date" formControlName="hireDate" [disabled]="isViewMode">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Pay Type</mat-label>
        <input matInput formControlName="payType" [disabled]="isViewMode">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Basic Salary</mat-label>
        <input matInput type="number" formControlName="basicSalary" [disabled]="isViewMode">
      </mat-form-field>
    </div>

    <!-- Row 6: Personal Info -->
    <div class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>Date of Birth</mat-label>
        <input matInput type="date" formControlName="dateOfBirth" [disabled]="isViewMode">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Gender</mat-label>
        <input matInput formControlName="gender" [disabled]="isViewMode">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Nationality</mat-label>
        <input matInput formControlName="nationality" [disabled]="isViewMode">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Marital Status</mat-label>
        <input matInput formControlName="maritalStatus" [disabled]="isViewMode">
      </mat-form-field>
    </div>

    <!-- Row 7: Address -->
    <div formGroupName="address" class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>Street</mat-label>
        <input matInput formControlName="street" [disabled]="isViewMode">
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>City</mat-label>
        <input matInput formControlName="city" [disabled]="isViewMode">
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>State</mat-label>
        <input matInput formControlName="state" [disabled]="isViewMode">
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Zip</mat-label>
        <input matInput formControlName="zip" [disabled]="isViewMode">
      </mat-form-field>
    </div>

    <!-- Row 8: Emergency Contact -->
    <div formGroupName="emergencyContact" class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>Name</mat-label>
        <input matInput formControlName="name" [disabled]="isViewMode">
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" [disabled]="isViewMode">
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Phone</mat-label>
        <input matInput formControlName="phone" [disabled]="isViewMode">
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Relationship</mat-label>
        <input matInput formControlName="relationship" [disabled]="isViewMode">
      </mat-form-field>
    </div>

  </form>
</mat-dialog-content>

<div class="dialog-actions">
  <button mat-stroked-button (click)="cancel()">Cancel</button>
  <button mat-raised-button color="primary" (click)="save()" [disabled]="isViewMode">Save</button>
</div>
