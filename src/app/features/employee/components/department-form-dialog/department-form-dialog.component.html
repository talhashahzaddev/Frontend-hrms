<div class="dialog-header">
  <h2 mat-dialog-title>
    <mat-icon>apartment</mat-icon>
    {{ data.mode === 'create' ? 'Create New Department' : 'Edit Department' }}
  </h2>
  <button mat-icon-button mat-dialog-close class="close-button">
    <mat-icon>close</mat-icon>
  </button>
</div>

<mat-dialog-content class="dialog-content">
  <form [formGroup]="departmentForm" class="department-form">
    
    <!-- Department Name -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Department Name *</mat-label>
      <input matInput 
             formControlName="departmentName" 
             placeholder="Enter department name"
             maxlength="100">
      <mat-hint>Required field</mat-hint>
      <mat-error *ngIf="departmentForm.get('departmentName')?.hasError('required')">
        Department name is required
      </mat-error>
      <mat-error *ngIf="departmentForm.get('departmentName')?.hasError('maxlength')">
        Department name cannot exceed 100 characters
      </mat-error>
    </mat-form-field>

    <!-- Description -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Description</mat-label>
      <textarea matInput 
                formControlName="description" 
                placeholder="Enter department description (optional)"
                rows="3"
                maxlength="500"></textarea>
      <mat-hint>Optional - Brief description of the department</mat-hint>
      <mat-error *ngIf="departmentForm.get('description')?.hasError('maxlength')">
        Description cannot exceed 500 characters
      </mat-error>
    </mat-form-field>

    <!-- Manager -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Department Manager</mat-label>
      <mat-select formControlName="managerId" placeholder="Select a manager (optional)">
        <mat-option value="">No Manager</mat-option>
        <mat-option *ngFor="let manager of data.managers" [value]="manager.employeeId">
          {{ manager.fullName }} - {{ manager.email }}
        </mat-option>
      </mat-select>
      <mat-hint>Optional - Select the department manager</mat-hint>
    </mat-form-field>

  </form>
</mat-dialog-content>

<mat-dialog-actions class="dialog-actions">
  <button mat-stroked-button mat-dialog-close type="button">
    Cancel
  </button>
  <button mat-flat-button 
          [disabled]="departmentForm.invalid || isSubmitting"
          (click)="onSubmit()"
          class="submit-button">
    <mat-spinner *ngIf="isSubmitting" diameter="20"></mat-spinner>
    <span *ngIf="!isSubmitting">
      {{ data.mode === 'create' ? 'Create Department' : 'Update Department' }}
    </span>
    <span *ngIf="isSubmitting">
      {{ data.mode === 'create' ? 'Creating...' : 'Updating...' }}
    </span>
  </button>
</mat-dialog-actions>
